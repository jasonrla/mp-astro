import{k as m,j as e,c as h,b as u,t as f,h as g}from"./checkoutStore.BjY-Dy3Q.js";import{r as i}from"./index.Be8AcK8B.js";const j=async a=>{const r=await fetch(`/api/orders/${a}`);if(!r.ok)throw r.status===404?new Error("Order not found"):new Error("Failed to fetch order");return await r.json()},y=({orderId:a})=>{m();const[r,o]=i.useState(null),[c,l]=i.useState(!0),[x,d]=i.useState(null);if(i.useEffect(()=>{(async()=>{if(a){if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(a)){l(!1),d("Orden no encontrada");return}l(!0);try{const n=await j(a);o(n)}catch(n){console.error("Error fetching order:",n),n instanceof Error&&n.message==="Order not found"?d("Orden no encontrada"):d("Error al cargar la orden")}finally{l(!1)}}else l(!1)})()},[a]),c)return e.jsx("div",{className:"flex min-h-[400px] items-center justify-center rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 animate-spin rounded-full border-4 border-blue-200 border-t-blue-600"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando detalles del pedido..."})]})});if(x)return e.jsx("div",{className:"flex min-h-[400px] items-center justify-center rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-red-100",children:e.jsx("svg",{className:"h-8 w-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Orden no encontrada"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"No pudimos encontrar la orden que buscas. Verifica el enlace o intenta nuevamente."}),e.jsx("a",{href:"/",className:"mt-6 inline-block rounded-lg bg-blue-600 px-6 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-700",children:"Volver al inicio"})]})});const s=r||{trackingCode:g.value,total:f.value,items:u.value,customer:h.value,deliveryDate:new Date(Date.now()+10080*60*1e3).toLocaleDateString("es-PE",{weekday:"long",year:"numeric",month:"long",day:"numeric"})};return e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-6 flex flex-col items-center text-center",children:[e.jsx("div",{className:"mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-green-100",children:e.jsx("svg",{className:"h-10 w-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"¡Pago exitoso!"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Tu pedido ha sido confirmado y está en proceso"})]}),e.jsx("div",{className:"mb-6 rounded-lg bg-blue-50 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-blue-900",children:"Código de seguimiento"}),e.jsx("p",{className:"mt-1 text-lg font-bold text-blue-600",children:s.trackingCode})]}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(s.trackingCode||"")},className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-700",children:"Copiar"})]})}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Detalles del pedido"}),e.jsx("div",{className:"space-y-3",children:s.items.map(t=>e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"h-16 w-16 flex-shrink-0 overflow-hidden rounded-lg border border-gray-200 bg-gray-50",children:e.jsx("img",{src:t.image,alt:t.name,className:"h-full w-full object-cover object-center"})}),e.jsxs("div",{className:"flex flex-1 flex-col justify-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Cantidad: ",t.quantity]})]}),e.jsxs("div",{className:"flex items-center text-sm font-semibold text-gray-900",children:["S/ ",(t.price*t.quantity).toFixed(2)]})]},t.id))}),e.jsx("div",{className:"border-t border-gray-200 pt-3",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-base font-semibold text-gray-900",children:"Total pagado"}),e.jsxs("span",{className:"text-lg font-bold text-blue-600",children:["S/ ",s.total.toFixed(2)]})]})})]}),e.jsxs("div",{className:"mb-6 rounded-lg bg-gray-50 p-4",children:[e.jsx("h3",{className:"mb-3 text-sm font-semibold text-gray-900",children:"Información de envío"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Destinatario:"})," ",s.customer.firstName," ",s.customer.lastName]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Dirección:"})," ",s.customer.address]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Ciudad:"})," ",s.customer.city,", ",s.customer.zipCode]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Teléfono:"})," ",s.customer.phone]})]})]}),e.jsxs("div",{className:"mb-6 flex items-center gap-3 rounded-lg border border-green-200 bg-green-50 p-4",children:[e.jsx("svg",{className:"h-6 w-6 flex-shrink-0 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-900",children:"Entrega estimada"}),e.jsx("p",{className:"text-xs text-green-700",children:s.deliveryDate})]})]}),e.jsxs("div",{className:"rounded-lg bg-gray-50 p-4",children:[e.jsx("h3",{className:"mb-3 text-sm font-semibold text-gray-900",children:"Próximos pasos"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{className:"text-blue-600",children:"•"}),e.jsxs("span",{children:["Recibirás un email de confirmación en ",s.customer.email]})]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{className:"text-blue-600",children:"•"}),e.jsx("span",{children:"Te notificaremos cuando tu pedido sea enviado"})]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{className:"text-blue-600",children:"•"}),e.jsx("span",{children:"Puedes rastrear tu pedido con el código de seguimiento"})]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("a",{href:"/",className:"block w-full rounded-lg bg-blue-600 px-6 py-3 text-center text-base font-semibold text-white shadow-sm transition-all hover:bg-blue-700",children:"Volver a la tienda"})})]})};export{y as default};
